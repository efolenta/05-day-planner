<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Added link to the jQuery Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap Library -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- Font Awesome Library -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap">
    <!-- Local Stylesheet -->
    <link rel="stylesheet" href="style.css">

    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <span id="name"></span>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->
      <div class="row" id="timeblock-container">
        <label class="hour" for="9am">9am:</label>
        <input type="text" id="9am-entry" name="9am">
        <button class="saveBtn">Save</button>
      </div>
    </div>

    <script>
      $(document).ready(function() {
          let currentDate = new Date();
          let currentTime = currentDate.getHours() + ":" + currentDate.getMinutes();
          let plannerItemCount = 0;
          let timeblockContainer = document.getElementById('timeblock-container')
          var plannerTimeSlots = [
            {
              hour: "9am",
              entry: "",
            },
            {
              hour: "10am",
              entry: "",
            },
            {
              hour: "11am",
              entry: "",
            },
            {
              hour: "12pm",
              entry: "",
            },
            {
              hour: "1pm",
              entry: "",
            },
            {
              hour: "2pm",
              entry: "",
            },
            {
              hour: "3pm",
              entry: "",
            },
            {
              hour: "4pm",
              entry: "",
            },
            {
              hour: "5pm",
              entry: "",
            }];

            function loadTimeBlocks() {
              
            }
            
            initializePlanner();

          function initializePlanner() {

            let name = localStorage.getItem("name");

            if (localStorage.getItem("name") === null ) {
              console.log("New user detected!");
              name = prompt("Please type in your name!");
              $('#name').html(`<h2>Prepared for ${name}</h2>`);
              localStorage.setItem("name", name);
            }
            else {
              console.log("Stored user detected!");
              $('#name').html(`<h2>Prepared for ${name}</h2>`);
              localStorage.getItem("name");
              // Load the stored name
              alert(`Welcome back ${name}!`);
              // Load the existing planner entries
              // loadPlanner();
            }

          function loadPlanner() {
            let plannerItems = localStorage.getItem("items");
            localStorage.getItem("items");
            for (var i = 0; i < plannerTimeSlots.length; i++) {
              $('#timeblocks').append($('<label>').text(plannerTimeSlots.hour));

            }
          }

          function entryPlanner() {
            for (var i=0; i < plannerTimeSlots.length; i++) {
              $('#timeblocks').append($('<label>').text(plannerTimeSlots[0].hour));

            }
          }
     
        
            // if (localStorage.getItem("name") === null) {

            // var setName = prompt("Please type in your name!");
            // alert(`Welcome ${setName} to the day planner! We are getting things ready for you.`)
            // $('#name').html(`<h2>Prepared for ${name}</h2>`);
            // alert(`The current time is ${currentTime}`);

            // }
            // else if (name === true) {
            //   alert(`Welcome back ${name}`);
            //   $('#name').html(`<h2>Prepared for ${name}</h2>`);
            // }
            // else {
            //   alert("something else");
            // }
          }

          // initializePlanner();


          if (currentTime  <= 9 ) {
          alert("It is currently too early to work!");

          } else if (currentTime >= 18) {
          alert("It is currently after work hours! Go home!");
          }

      });    
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  </body>
</html>
